(function(e){function t(t){for(var c,i,r=t[0],s=t[1],u=t[2],f=0,d=[];f<r.length;f++)i=r[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],c=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(c=!1)}c&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var c={},a={app:0},o=[];function i(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=c,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)i.d(n,c,function(t){return e[t]}.bind(null,c));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var l=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0ac2":function(e,t,n){"use strict";n("312b")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},1771:function(e,t,n){var c={"./arrow-left.svg":"857e","./chevron-right.svg":"4672","./crosshairs-gps.svg":"6355","./dog.svg":"de07","./map-marker.svg":"6e32","./map.svg":"a086","./navigation.svg":"9b8e","./qrcode-scan.svg":"af5e"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}a.keys=function(){return Object.keys(c)},a.resolve=o,e.exports=a,a.id="1771"},"1bb7":function(e,t,n){},2:function(e,t){},"25a9":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a=n("de07"),o=n.n(a),i=Object(c["s"])("data-v-40d79213");Object(c["i"])("data-v-40d79213");var r={id:"container"},s=Object(c["e"])("img",{src:o.a},null,-1);Object(c["h"])();var u=i((function(e,t){return Object(c["g"])(),Object(c["c"])("div",r,[s,Object(c["e"])("span",null,[Object(c["l"])(e.$slots,"default",{},void 0,!0)])])}));n("0ac2");const l={};l.render=u,l.__scopeId="data-v-40d79213";t["default"]=l},3:function(e,t){},"312b":function(e,t,n){},4:function(e,t){},4627:function(e,t,n){"use strict";n("854a")},4672:function(e,t,n){e.exports=n.p+"img/chevron-right.6daaaf08.svg"},"4c16":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a=Object(c["s"])("data-v-191e790d");Object(c["i"])("data-v-191e790d");var o={ref:"background",class:"floating-button"};Object(c["h"])();var i=a((function(e,t,a,i,r,s){return Object(c["g"])(),Object(c["c"])("div",o,[Object(c["e"])("img",{src:n("1771")("./".concat(a.src))},null,8,["src"])],512)})),r=(n("66d2"),{props:["src"],data:function(){return{}},computed:{imgPath:function(){return n("514f")("".concat(this.img))}}});n("8a8d");r.render=i,r.__scopeId="data-v-191e790d";t["default"]=r},5:function(e,t){},"514f":function(e,t,n){var c={"./EmptySpace":"25a9","./EmptySpace.vue":"25a9","./FloatingButton":"4c16","./FloatingButton.vue":"4c16","./LocationTitle":"a153","./LocationTitle.vue":"a153","./OpenLayersMap":"8746","./OpenLayersMap.vue":"8746","./PlaceList":"feae","./PlaceList.vue":"feae","./PlaceListComponent":"a9ba","./PlaceListComponent.vue":"a9ba","./Qr-Scanner":"e184","./Qr-Scanner.vue":"e184"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}a.keys=function(){return Object.keys(c)},a.resolve=o,e.exports=a,a.id="514f"},"56d7":function(e,t,n){"use strict";n.r(t);var c=n("5530"),a=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("7a23")),o=n("5502"),i=(n("d81d"),n("b0c0"),n("857e")),r=n.n(i),s={id:"container"},u={id:"list-view",class:{view:!0}},l={class:"scroll-container"},f={class:"list-container"},d=Object(a["d"])(" Tocca sull'icona della mappa per iniziare ad esplorare "),p=Object(a["e"])("div",{class:"title"},[Object(a["e"])("span",{class:"text-container"}," I tuoi luoghi ")],-1),b={class:"title over-map"},v={class:"text-container"},g={class:"qr-background"},O={class:"over-scanner"},h={id:"qr-message"};function j(e,t,n,c,o,i){var j=Object(a["m"])("empty-space"),m=Object(a["m"])("place-list"),w=Object(a["m"])("floating-button"),y=Object(a["m"])("open-layers-map"),P=Object(a["m"])("qr-scanner");return Object(a["g"])(),Object(a["c"])("div",s,[Object(a["e"])("div",u,[Object(a["e"])("div",l,[Object(a["e"])("div",f,[0==i.placesArray.length?(Object(a["g"])(),Object(a["c"])(j,{key:0},{default:Object(a["q"])((function(){return[d]})),_:1})):(Object(a["g"])(),Object(a["c"])(m,{key:1,array:i.placesArray,onFocusPlace:t[1]||(t[1]=function(t){e.$refs.map.focusPlace(t),e.changeView("mapview")})},null,8,["array"]))]),p]),Object(a["e"])(w,{style:{bottom:"5vh",right:"5vw"},src:"map.svg",onClick:t[2]||(t[2]=function(t){return e.changeView("mapview")})})]),Object(a["e"])("div",{id:"map-view",class:{view:!0,"hidden-right":"listview"===e.currentView}},[Object(a["e"])("div",b,[Object(a["e"])("img",{id:"back-button",onClick:t[3]||(t[3]=function(t){return e.backView()}),src:r.a}),Object(a["e"])("span",v,Object(a["n"])(e.currentLocation.name),1)]),Object(a["r"])(Object(a["e"])(w,{style:{bottom:"5vh",left:"5vw"},src:"crosshairs-gps.svg",onClick:t[4]||(t[4]=function(t){return e.startFollowingPosition()}),class:"over-map"},null,512),[[a["o"],!e.focusPosition]]),Object(a["e"])(w,{style:{bottom:"5vh",right:"5vw"},src:"qrcode-scan.svg",onClick:t[5]||(t[5]=function(t){return e.changeView("scannerview")}),class:"over-map"}),Object(a["e"])(y,{ref:"map","place-data":o.currentPlace},null,8,["place-data"])],2),Object(a["e"])("div",{id:"code-view",class:{view:!0,"hidden-right":"mapview"===e.currentView||"listview"===e.currentView}},[Object(a["e"])("div",g,[Object(a["e"])(P,{run:!("mapview"===e.currentView||"listview"===e.currentView),onFound:t[6]||(t[6]=function(e){return o.qrResult=e})},null,8,["run"]),Object(a["e"])("div",O,[Object(a["e"])("span",h,Object(a["n"])(o.qrMessage),1),Object(a["e"])(w,{style:{top:"5vh",left:"5vw"},src:"arrow-left.svg",onClick:t[7]||(t[7]=function(t){return e.backView()})})])])],2)])}n("07ac");var m=n("8746"),w=n("4c16"),y=n("e184"),P=n("25a9"),L=n("feae"),k={name:"App",components:{OpenLayersMap:m["default"],FloatingButton:w["default"],QrScanner:y["default"],EmptySpace:P["default"],PlaceList:L["default"]},emits:["newCode"],data:function(){return{currentMapLocationName:"",qrResult:"",qrMessage:"Codice non trovato",currentPlace:{}}},watch:{qrResult:function(e){e&&(this.handleCode(e),this.qrMessage="Codice non trovato")},currentView:function(e){"scannerview"===e&&(this.qrResult="",this.qrMessage="Codice non trovato")},places:{handler:function(e){localStorage.places=e},deep:!0}},computed:Object(c["a"])({placesArray:function(){return Object.values(this.places)}},Object(o["c"])(["focusPosition","currentLocation","currentView","viewHistory","places"])),methods:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["startFollowingPosition","changeView","backView","addPlace","loadPlaces"])),{},{handleCode:function(e){try{e=JSON.parse(e)}catch(t){console.log(t)}"appid"===e.data.id&&(void 0===this.places[e.data.id]?(this.addPlace(e.data),this.$refs.map.focusPlace(e.data.next)):(this.qrMessage="Codice gia inserito!",this.$refs.map.focusPlace(e.data.current)),this.backView())}})};n("7062");k.render=j;var V=k,C=Object(o["a"])({state:function(){return{focusPosition:!0,currentLocation:{position:{lat:0,lon:0},heading:0,features:{name:"",street:"",city:"",county:"",state:"",country:""},name:""},currentView:"listview",viewHistory:["listview"],places:{}}},mutations:{startFollowingPosition:function(e){e.focusPosition=!0},stopFollowingPosition:function(e){e.focusPosition=!1},updateLocation:function(e,t){e.currentLocation=Object(c["a"])(Object(c["a"])({},e.currentLocation),t)},changeView:function(e,t){t.reset?e.viewHistory=["listView"]:e.viewHistory.push(e.currentView),e.currentView=t.view||t},backView:function(e){e.currentView=e.viewHistory.pop()},addPlace:function(e,t){void 0!==t.current&&(e.places[t.current.id]=Object(c["a"])(Object(c["a"])({},e.places[t.current.id]),t.current)),void 0!==t.next&&(e.places[t.next.id]=t.next)},loadPlaces:function(e,t){e.places=t}}}),_=Object(a["b"])(V);_.use(C),_.mount("#app")},6:function(e,t){},"61b0":function(e,t,n){},6355:function(e,t,n){e.exports=n.p+"img/crosshairs-gps.4cb1c2f7.svg"},"6e32":function(e,t,n){e.exports=n.p+"img/map-marker.9732d55d.svg"},7:function(e,t){},7062:function(e,t,n){"use strict";n("7ec5")},7723:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="7723"},"7db9":function(e,t,n){"use strict";n("61b0")},"7ec5":function(e,t,n){},8:function(e,t){},8529:function(e,t,n){},"854a":function(e,t,n){},"857e":function(e,t,n){e.exports=n.p+"img/arrow-left.18be30f9.svg"},8746:function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a=Object(c["s"])("data-v-64b89606");Object(c["i"])("data-v-64b89606");var o={ref:"map",class:"map",tabindex:"0"};Object(c["h"])();var i=a((function(e,t,n,a,i,r){return Object(c["g"])(),Object(c["c"])("div",o,null,512)})),r=n("3835"),s=n("5530"),u=(n("d81d"),n("07ac"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("2b3d"),n("a15b"),n("fb6a"),n("4de4"),n("5502")),l=(n("5bc0"),n("5eee")),f=n("d0e9"),d=n("5831"),p=n("480c"),b=n("3e6b"),v=n("4cdf"),g=n("f403"),O=n("ce2c"),h=n("83a6"),j=n("8682"),m=n("6c77"),w=n("a2c7"),y=n("256f"),P=n("f53f"),L={name:"OpenLayersMap",data:function(){return{map:{},pointerFeature:null,geolocation:{},center:[11.41552,45.50389],features:[],targetPlaceLayer:{}}},watch:{trackPosition:function(e){this.geolocation.setTracking(e)},places:{handler:function(e){void 0!==e&&(this.featuresFromPlaces(),console.log("editing"))},deep:!0}},computed:Object(s["a"])({},Object(u["c"])(["focusPosition","currentLocation","places"])),methods:Object(s["a"])(Object(s["a"])({},Object(u["b"])(["stopFollowingPosition","updateLocation"])),{},{initMap:function(){var e=this;this.pointerFeature=new v["a"]({geometry:new g["a"]([0,0])}),this.pointerFeature.setStyle(new m["b"]({image:new O["a"]({radius:8,fill:new h["a"]({color:"#3399CC"}),stroke:new j["a"]({color:"#fff",width:2})})})),this.map=new l["a"]({layers:[new p["a"]({source:new f["a"]}),new b["a"]({source:new d["a"]({features:[this.pointerFeature]})})],target:this.$refs["map"],view:new w["a"]({center:Object(y["d"])([0,0]),zoom:15}),controls:[]}),this.geolocation=new P["a"]({projection:this.map.getView().getProjection(),trackingOptions:{enableHighAccuracy:!0}}),this.geolocation.on("change",(function(){var t=e.map.getView();(t.getCenter()[0]!=e.currentLocation.position.lon&&t.getCenter()[1]!=e.currentLocation.position.lat||t.getRotation()!=e.currentLocation.heading)&&e.focusPosition&&e.focusOnPos()})),this.geolocation.on("change:position",(function(){var t=e.geolocation.getPosition();e.updateLocation({position:{lon:t[0],lat:t[1]}}),e.pointerFeature.getGeometry().setCoordinates(t)})),this.geolocation.on("change:heading",(function(){var t=e.geolocation.getHeading();e.updateLocation({heading:void 0===t?0:t}),e.pointerFeature.getGeometry().set("rotation",e.currentLocation.heading)})),this.geolocation.setTracking(!0),this.map.on("moveend",(function(){console.log(Object(y["m"])(e.map.getView().getCenter())),e.map.getView().unset("focusMove"),e.getLocationName().then((function(t){e.updateLocation({name:t})}))})),this.map.on("movestart",(function(){console.log(e.map.getView().get("focusMove")),e.map.getView().get("focusMove")||e.stopFollowingPosition()}))},focusOnPos:function(){var e=this.map.getView();e.set("focusMove",!0),e.animate({center:Object.values(this.currentLocation.position)},{zoom:17},{rotation:this.currentLocation.heading})},focusPlace:function(e){var t=this.map.getView();this.stopFollowingPosition(),t.animate({center:Object(y["d"])(Object.values(e.coords))},{zoom:17},{rotation:0})},getLocationName:function(){var e="https://api.geoapify.com/v1/geocode/reverse",t=Object(y["m"])(this.map.getView().getCenter()),n=Object(r["a"])(t,2),c=n[0],a=n[1],o=Object(s["a"])(Object(s["a"])({},{lon:c,lat:a}),{},{apiKey:"f3796c82f94f4778a9aec8927013f929"});return e+="?"+new URLSearchParams(o).toString(),fetch(e,{credentials:"include",headers:{"Access-Control-Allow-Origin":window.location.protocol+"//"+window.location.hostname}}).then((function(e){return e.json()})).then((function(e){var t=e.features.length>0?e.features[0].properties:{},n=function(e){var t=e.street,n=e.city,c=e.county,a=e.state,o=e.country;return[t,n,c,a,o]}(t);return n.filter((function(e){return e})).slice(0,2).join(", ")}))},featuresFromPlaces:function(){if(console.log(this.places),0!=this.places.length){for(var e in this.map.removeLayer(this.targetPlaceLayer),this.features=[],this.places){var t=this.places[e];""!==t.title&&(this.features.push(new v["a"]({geometry:new g["a"](Object(y["d"])(Object.values(t.coords)))})),this.features[this.features.length-1].setStyle(new m["b"]({image:new O["a"]({radius:t.found?4:6,fill:new h["a"]({color:t.found?"#F92880":"#00f030"}),stroke:new j["a"]({color:"#fff",width:2})})})),console.log(this.features))}this.targetPlaceLayer=new b["a"]({source:new d["a"]({features:this.features})}),this.map.addLayer(this.targetPlaceLayer)}}}),mounted:function(){this.initMap()}};n("7db9");L.render=i,L.__scopeId="data-v-64b89606";t["default"]=L},"8a8d":function(e,t,n){"use strict";n("8529")},9:function(e,t){},"909c":function(e,t,n){"use strict";n("bc127")},"9b8e":function(e,t,n){e.exports=n.p+"img/navigation.12869f82.svg"},"9e20":function(e,t,n){"use strict";n("1bb7")},a086:function(e,t,n){e.exports=n.p+"img/map.363f2e1b.svg"},a153:function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a=n("857e"),o=n.n(a),i=Object(c["s"])("data-v-8cd78360");Object(c["i"])("data-v-8cd78360");var r={class:"rectangle"},s={class:"text-container"};Object(c["h"])();var u=i((function(e,t,n,a,i,u){return Object(c["g"])(),Object(c["c"])("div",r,[Object(c["e"])("img",{id:"back-button",onClick:t[1]||(t[1]=function(t){return e.backView()}),src:o.a}),Object(c["e"])("span",s,[Object(c["l"])(e.$slots,"default",{},void 0,!0)])])})),l=n("5530"),f=n("5502"),d={name:"LocationTitle",data:function(){return{}},methods:Object(l["a"])({},Object(f["b"])(["backView"]))};n("bf3d");d.render=u,d.__scopeId="data-v-8cd78360";t["default"]=d},a9ba:function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a=n("6e32"),o=n.n(a),i=n("4672"),r=n.n(i),s=Object(c["s"])("data-v-4c9f39bf");Object(c["i"])("data-v-4c9f39bf");var u={class:"container"},l=Object(c["e"])("img",{src:o.a},null,-1),f=Object(c["e"])("img",{src:r.a},null,-1);Object(c["h"])();var d=s((function(e,t,n,a,o,i){return Object(c["g"])(),Object(c["c"])("div",u,[l,Object(c["e"])("span",null,[Object(c["l"])(e.$slots,"default",{},void 0,!0)]),f])})),p={props:["active"],data:function(){return{}}};n("4627");p.render=d,p.__scopeId="data-v-4c9f39bf";t["default"]=p},af5e:function(e,t,n){e.exports=n.p+"img/qrcode-scan.0d6f9154.svg"},bc127:function(e,t,n){},bf3d:function(e,t,n){"use strict";n("c75f")},c75f:function(e,t,n){},de07:function(e,t,n){e.exports=n.p+"img/dog.acc7650c.svg"},e184:function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a=Object(c["s"])("data-v-19f6dbe0");Object(c["i"])("data-v-19f6dbe0");var o={id:"scanner",ref:"video"};Object(c["h"])();var i=a((function(e,t,n,a,i,r){return Object(c["g"])(),Object(c["c"])("video",o," prova ",512)})),r=n("7959");r["a"].WORKER_PATH="@/qr-scanner-worker.min.js";var s={props:["run"],data:function(){return{scanner:{}}},emits:["found"],watch:{run:function(e){e?this.scanner.start():this.scanner.stop()}},methods:{setupScanner:function(){var e=this,t=new r["a"](this.$refs["video"],(function(t){e.$emit("found",t)}));t.start(),this.scanner=t}},mounted:function(){this.setupScanner()}};n("9e20");s.render=i,s.__scopeId="data-v-19f6dbe0";t["default"]=s},feae:function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a=Object(c["s"])("data-v-305eaf94"),o=a((function(e,t,n,o,i,r){var s=Object(c["m"])("place-list-component");return Object(c["g"])(),Object(c["c"])("div",null,[(Object(c["g"])(!0),Object(c["c"])(c["a"],null,Object(c["k"])(n.array,(function(t){return Object(c["g"])(),Object(c["c"])(s,{key:t.id,onClick:function(n){return e.$emit("focus-place",t)}},{default:a((function(){return[Object(c["d"])(Object(c["n"])(t.title),1)]})),_:2},1032,["onClick"])})),128))])})),i=n("a9ba"),r={components:{PlaceListComponent:i["default"]},props:["array"],emits:["focus-place"],data:function(){return{}}};n("909c");r.render=o,r.__scopeId="data-v-305eaf94";t["default"]=r}});
//# sourceMappingURL=app.a6215f4f.js.map